[
  [2, 0, 0, 0, [], "", [], "expected track start with nothing to return nothing"],
  [3, -1, 0, 0, [], "", null, "expected getting invalid grid version to error"],
  [-1, -1, 0, 0, [], "", null, "expected getting negative grid version to error"],
  [2, -1, 0, 0, [], "", null, "expected getting negative frame to error"],
  [2, 0, 7, 0, [], "", null, "expected getting invalid iteration to error"],
  [2, 0, -1, 0, [], "", null, "expected getting negative iteration to error"],
  [2, 0, 0, 4, [], "", null, "expected getting invalid sub iteration on iteration 0 to error"],
  [2, 0, 1, 23, [], "", null, "expected getting invalid sub iteration on iteration 1+ to error"],
  [2, 0, 0, -1, [], "", null, "expected getting negative sub iteration to error"],
  [
    2,
    1,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "",
    [
      {
        "points": [
          { "position_x": 0.4, "position_y": 0.175, "velocity_x": 0.4, "velocity_y": 0.175 },
          { "position_x": 0.4, "position_y": 5.175, "velocity_x": 0.4, "velocity_y": 0.175 },
          {
            "position_x": 15.4,
            "position_y": 5.175000000000001,
            "velocity_x": 0.40000000000000036,
            "velocity_y": 0.175
          },
          {
            "position_x": 17.9,
            "position_y": 0.17500000000000096,
            "velocity_x": 0.3999999999999986,
            "velocity_y": 0.175
          },
          { "position_x": 5.4, "position_y": 0.175, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          { "position_x": 5.4, "position_y": -5.325, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          { "position_x": 11.9, "position_y": -4.825, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          { "position_x": 11.9, "position_y": -4.825, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          { "position_x": 10.4, "position_y": 5.175, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          { "position_x": 10.4, "position_y": 5.175, "velocity_x": 0.40000000000000036, "velocity_y": 0.175 },
          {
            "position_x": 3.400026618033682,
            "position_y": -5.314681500777454,
            "velocity_x": 0.31999999999999995,
            "velocity_y": 0.175
          },
          {
            "position_x": 1.4000360349948258,
            "position_y": -5.3208189070614855,
            "velocity_x": 0.32000000000000006,
            "velocity_y": 0.175
          },
          {
            "position_x": -0.5999453884078877,
            "position_y": -5.31219881169913,
            "velocity_x": 0.31999999999999995,
            "velocity_y": 0.175
          },
          {
            "position_x": -2.5997739935586197,
            "position_y": -5.338381821856047,
            "velocity_x": 0.31999999999999995,
            "velocity_y": 0.175
          },
          {
            "position_x": -4.599773627026768,
            "position_y": -5.339592659282451,
            "velocity_x": 0.3200000000000003,
            "velocity_y": 0.175
          },
          {
            "position_x": -6.599773626977526,
            "position_y": -5.339606693940676,
            "velocity_x": 0.3200000000000003,
            "velocity_y": 0.175
          },
          {
            "position_x": -8.599618967945462,
            "position_y": -5.314734777873743,
            "velocity_x": 0.3200000000000003,
            "velocity_y": 0.175
          }
        ]
      }
    ],
    "expected single rider track with default initial state to return points"
  ],
  [
    2,
    10,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 4.475361461366957,
            "position_y": 6.074013385403481,
            "velocity_x": 0.5425255393597817,
            "velocity_y": 0.45041712406070217
          },
          {
            "position_x": 3.900774309565199,
            "position_y": 11.021987490078985,
            "velocity_x": 0.22368198976228282,
            "velocity_y": 0.20153162139574404
          },
          {
            "position_x": 18.837914734336934,
            "position_y": 12.793728500190149,
            "velocity_x": 0.2585130583355131,
            "velocity_y": 1.5702632409692943
          },
          {
            "position_x": 22.142176940561555,
            "position_y": 8.805247271468522,
            "velocity_x": 0.5746667109808641,
            "velocity_y": 1.7798245302717721
          },
          {
            "position_x": 9.463970734350168,
            "position_y": 6.705640009364507,
            "velocity_x": 0.5833077311275794,
            "velocity_y": 0.8113029314380935
          },
          {
            "position_x": 10.098392641408998,
            "position_y": 1.2127871668167534,
            "velocity_x": 0.8389472968672429,
            "velocity_y": 0.7430296108246979
          },
          {
            "position_x": 15.643233894351772,
            "position_y": 4.473534067420789,
            "velocity_x": 0.5820808012848158,
            "velocity_y": 1.7709710610004408
          },
          {
            "position_x": 15.684544812805074,
            "position_y": 4.294466839398247,
            "velocity_x": 0.6078538804292908,
            "velocity_y": 1.723754208635106
          },
          {
            "position_x": 13.86189913385119,
            "position_y": 12.203507704534193,
            "velocity_x": 0.24996933315486736,
            "velocity_y": 1.0761532949906745
          },
          {
            "position_x": 13.8778259031364,
            "position_y": 12.205396828523037,
            "velocity_x": 0.2893977479467438,
            "velocity_y": 1.0417157021756644
          },
          {
            "position_x": 8.100255217238148,
            "position_y": 1.2990822079714053,
            "velocity_x": 0.4436915484073268,
            "velocity_y": 0.9950186206322
          },
          {
            "position_x": 6.180084920131927,
            "position_y": 0.7396664143875922,
            "velocity_x": 0.47210133675556065,
            "velocity_y": 0.8806130573765736
          },
          {
            "position_x": 4.206390126045672,
            "position_y": 0.41635718192304255,
            "velocity_x": 0.4765958507137949,
            "velocity_y": 0.8443768400285561
          },
          {
            "position_x": 2.2146413994616494,
            "position_y": 0.2348716173430364,
            "velocity_x": 0.4797588530597936,
            "velocity_y": 0.7834311953969755
          },
          {
            "position_x": 0.21650111366476477,
            "position_y": 0.14864286184033015,
            "velocity_x": 0.4797493473122725,
            "velocity_y": 0.7859847322755849
          },
          {
            "position_x": -1.7829379277669797,
            "position_y": 0.10127705562417358,
            "velocity_x": 0.4786783831573878,
            "velocity_y": 0.8099588866928309
          },
          {
            "position_x": -3.7817839340201918,
            "position_y": 0.03334588983421523,
            "velocity_x": 0.4796409046276999,
            "velocity_y": 0.7657385615243977
          }
        ]
      }
    ],
    "expected collision with blue line"
  ],
  [
    2,
    47,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 45.78885991348023,
            "position_y": 28.120342843673956,
            "velocity_x": -0.6138171856622563,
            "velocity_y": 0.38479958055256275
          },
          {
            "position_x": 41.95626115485219,
            "position_y": 25.201132189272286,
            "velocity_x": -0.4291930232076524,
            "velocity_y": 0.16650924232827718
          },
          {
            "position_x": 32.95690356631852,
            "position_y": 37.20926551256457,
            "velocity_x": -0.2562776008222798,
            "velocity_y": -0.035447743866375
          },
          {
            "position_x": 34.95241686324442,
            "position_y": 42.15722667645021,
            "velocity_x": -0.8350251526781278,
            "velocity_y": 0.013373438472245869
          },
          {
            "position_x": 42.5290171662163,
            "position_y": 32.29537914311158,
            "velocity_x": -0.876239063690953,
            "velocity_y": 0.4177423348812283
          },
          {
            "position_x": 47.228707064782434,
            "position_y": 35.081647741874704,
            "velocity_x": -0.3129551068988903,
            "velocity_y": 0.37739375786264445
          },
          {
            "position_x": 41.87589156376577,
            "position_y": 38.543410852665566,
            "velocity_x": -0.5275159810528294,
            "velocity_y": 0.5185102562941311
          },
          {
            "position_x": 41.91383283082273,
            "position_y": 38.518873545401846,
            "velocity_x": -0.5117439853247205,
            "velocity_y": 0.5184870715221195
          },
          {
            "position_x": 37.83007462157038,
            "position_y": 37.521018688460586,
            "velocity_x": 0.1769711812024326,
            "velocity_y": 2.249016974183635
          },
          {
            "position_x": 37.92764591486653,
            "position_y": 37.749377079142626,
            "velocity_x": -0.21463616704791377,
            "velocity_y": 1.1431024281328945
          },
          {
            "position_x": 48.02467779317291,
            "position_y": 36.916431271216936,
            "velocity_x": -0.7535425758618545,
            "velocity_y": 1.461904615080971
          },
          {
            "position_x": 50.011057844279236,
            "position_y": 37.14944262837974,
            "velocity_x": 0.5121574145572083,
            "velocity_y": 2.2506002773466034
          },
          {
            "position_x": 51.49089247190286,
            "position_y": 35.80404697100379,
            "velocity_x": 0.8032396926175182,
            "velocity_y": 2.2728669668395325
          },
          {
            "position_x": 51.44077372352121,
            "position_y": 33.804675041856875,
            "velocity_x": 0.7925448371450501,
            "velocity_y": 2.2758046566342753
          },
          {
            "position_x": 51.39543429962967,
            "position_y": 31.805189023740922,
            "velocity_x": 1.0109127521903305,
            "velocity_y": 2.231229542079697
          },
          {
            "position_x": 50.816526933687875,
            "position_y": 29.890804981376817,
            "velocity_x": 0.9601865548139017,
            "velocity_y": 2.246574348599108
          },
          {
            "position_x": 50.34090028592097,
            "position_y": 27.948183224077155,
            "velocity_x": 0.9566823269880559,
            "velocity_y": 2.247487308284525
          }
        ]
      }
    ],
    "expected shoulder friction on blue line"
  ],
  [
    2,
    58,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 35.061427391289,
            "position_y": 34.405787546274176,
            "velocity_x": -1.0830739747807243,
            "velocity_y": 0.8786855264880302
          },
          {
            "position_x": 30.931277961956305,
            "position_y": 31.83888165268766,
            "velocity_x": -1.086387134636034,
            "velocity_y": 0.8749463372023201
          },
          {
            "position_x": 22.84677579347422,
            "position_y": 44.32347479907659,
            "velocity_x": -1.098445512371164,
            "velocity_y": 0.8750634776361637
          },
          {
            "position_x": 25.47787312428567,
            "position_y": 49.14830753051273,
            "velocity_x": -1.0981417482549425,
            "velocity_y": 0.8851882352952913
          },
          {
            "position_x": 32.51215721496508,
            "position_y": 38.82672041378092,
            "velocity_x": -1.0872236476205828,
            "velocity_y": 0.8687831604412068
          },
          {
            "position_x": 37.47662987319003,
            "position_y": 41.38849337648093,
            "velocity_x": -0.7872902595415994,
            "velocity_y": 0.6841549255617807
          },
          {
            "position_x": 32.03605250793616,
            "position_y": 44.90701368058303,
            "velocity_x": -1.085830059680191,
            "velocity_y": 0.8772260424396692
          },
          {
            "position_x": 32.04649870429721,
            "position_y": 44.90025793546088,
            "velocity_x": -1.0843591247115327,
            "velocity_y": 0.8762747620505167
          },
          {
            "position_x": 27.815298464562296,
            "position_y": 44.09824503597791,
            "velocity_x": -1.094669766010231,
            "velocity_y": 0.8677992970683548
          },
          {
            "position_x": 27.844165184228395,
            "position_y": 44.161922091957116,
            "velocity_x": -1.0990398859119281,
            "velocity_y": 0.8550071278416695
          },
          {
            "position_x": 39.473746078119824,
            "position_y": 41.28113014251882,
            "velocity_x": -0.8582611866814602,
            "velocity_y": 0.5480488344066772
          },
          {
            "position_x": 41.29894364631261,
            "position_y": 42.09884270635965,
            "velocity_x": -0.5232302499574928,
            "velocity_y": 0.24433934160650211
          },
          {
            "position_x": 41.9354505035331,
            "position_y": 43.99485405144999,
            "velocity_x": -0.28441207944548524,
            "velocity_y": 0.24408492182664077
          },
          {
            "position_x": 41.328236217349904,
            "position_y": 45.90044865961172,
            "velocity_x": -0.379082009855415,
            "velocity_y": 0.21397716266902192
          },
          {
            "position_x": 40.617846342064965,
            "position_y": 47.77003316561637,
            "velocity_x": -0.6511058732735648,
            "velocity_y": 0.17615415571380594
          },
          {
            "position_x": 40.003197954978056,
            "position_y": 49.673242917654086,
            "velocity_x": -1.0544023062697534,
            "velocity_y": 0.17945065293686183
          },
          {
            "position_x": 39.89899968432987,
            "position_y": 51.67052675336546,
            "velocity_x": -1.4622729565786017,
            "velocity_y": 0.32405658990086295
          }
        ]
      }
    ],
    "expected line left extension to work"
  ],
  [
    2,
    115,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 28.331899799772646,
            "position_y": 82.36814459125998,
            "velocity_x": 1.5755042437922064,
            "velocity_y": 0.6552727423456333
          },
          {
            "position_x": 26.879367110679578,
            "position_y": 87.1659455515897,
            "velocity_x": 1.5881967582853775,
            "velocity_y": 0.6479398539193852
          },
          {
            "position_x": 41.316410989938596,
            "position_y": 91.46506868457982,
            "velocity_x": 1.574019097463811,
            "velocity_y": 0.6437179709550123
          },
          {
            "position_x": 45.095782838666956,
            "position_y": 87.37778045248709,
            "velocity_x": 1.5871176578256012,
            "velocity_y": 0.6578056391156963
          },
          {
            "position_x": 33.07807757714461,
            "position_y": 83.873611051274,
            "velocity_x": 1.592303428667659,
            "velocity_y": 0.6315736147400088
          },
          {
            "position_x": 34.792490040200114,
            "position_y": 78.6924441484473,
            "velocity_x": 1.5440555626051804,
            "velocity_y": 0.5998116067296622
          },
          {
            "position_x": 37.85523516988885,
            "position_y": 84.4495609497599,
            "velocity_x": 1.6295717386572761,
            "velocity_y": 0.5516559501501093
          },
          {
            "position_x": 37.86405131158236,
            "position_y": 84.43620095529562,
            "velocity_x": 1.6211889246828974,
            "velocity_y": 0.5620782165255378
          },
          {
            "position_x": 36.51670828918349,
            "position_y": 90.03579319820854,
            "velocity_x": 1.5752934628374504,
            "velocity_y": 0.6440974567904505
          },
          {
            "position_x": 36.52437666665388,
            "position_y": 90.03807671963101,
            "velocity_x": 1.5740225984425962,
            "velocity_y": 0.6437190134910822
          },
          {
            "position_x": 32.89083442559291,
            "position_y": 79.31188415638421,
            "velocity_x": 1.1186405994637199,
            "velocity_y": 0.32346513294000945
          },
          {
            "position_x": 31.298617714269245,
            "position_y": 80.52219235853012,
            "velocity_x": 1.2039384763622765,
            "velocity_y": 0.44937489796921
          },
          {
            "position_x": 29.458631161510375,
            "position_y": 81.30606064189571,
            "velocity_x": 1.238750953678431,
            "velocity_y": 0.7544027291164297
          },
          {
            "position_x": 27.463168158874296,
            "position_y": 81.1714225896571,
            "velocity_x": 1.193843855700797,
            "velocity_y": 0.9026922889325419
          },
          {
            "position_x": 25.60825542686982,
            "position_y": 80.42355979699545,
            "velocity_x": 1.2243848640452712,
            "velocity_y": 0.8264219875407777
          },
          {
            "position_x": 23.764685867454062,
            "position_y": 79.648155850916,
            "velocity_x": 1.2721414632178836,
            "velocity_y": 0.6245012440618098
          },
          {
            "position_x": 21.81851012142353,
            "position_y": 79.18728714340538,
            "velocity_x": 1.223992942432969,
            "velocity_y": 0.2133170674010671
          }
        ]
      }
    ],
    "expected line right extension to work"
  ],
  [
    2,
    139,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 82.12010018121394,
            "position_y": 125.34666325864755,
            "velocity_x": 2.47575699795037,
            "velocity_y": 3.9757211996713293
          },
          {
            "position_x": 77.19730230000143,
            "position_y": 124.70184313982388,
            "velocity_x": 2.474873601574643,
            "velocity_y": 3.619532399467988
          },
          {
            "position_x": 75.15047207727861,
            "position_y": 139.5224160562124,
            "velocity_x": 1.4262776051015464,
            "velocity_y": 3.5949551707478404
          },
          {
            "position_x": 79.73248457499602,
            "position_y": 142.71831272872532,
            "velocity_x": 1.2429163795517155,
            "velocity_y": 3.9279287053833114
          },
          {
            "position_x": 81.5244834053161,
            "position_y": 130.32823964901903,
            "velocity_x": 2.100492103862237,
            "velocity_y": 3.9695305706820845
          },
          {
            "position_x": 87.02447180275716,
            "position_y": 130.9321031695052,
            "velocity_x": 2.0959165382863176,
            "velocity_y": 4.3959724512351555
          },
          {
            "position_x": 82.20480949403475,
            "position_y": 135.3096954829297,
            "velocity_x": 1.6557047481861389,
            "velocity_y": 4.029934206434109
          },
          {
            "position_x": 82.1742573933364,
            "position_y": 135.29016532002953,
            "velocity_x": 1.6767222607710437,
            "velocity_y": 4.034460941516502
          },
          {
            "position_x": 75.87421173859882,
            "position_y": 134.57744164594627,
            "velocity_x": 1.7659882985680326,
            "velocity_y": 3.6096213849838277
          },
          {
            "position_x": 75.86802212810554,
            "position_y": 134.57417172872022,
            "velocity_x": 1.7668311686535674,
            "velocity_y": 3.609376529838303
          },
          {
            "position_x": 86.04086450992918,
            "position_y": 129.19069089968062,
            "velocity_x": 1.7150445307651012,
            "velocity_y": 3.527933202597251
          },
          {
            "position_x": 84.96819155287709,
            "position_y": 127.50268239045766,
            "velocity_x": 1.680700292957522,
            "velocity_y": 3.547239795835071
          },
          {
            "position_x": 84.11885445852361,
            "position_y": 125.6919845967452,
            "velocity_x": 1.660666980611495,
            "velocity_y": 3.557103929250252
          },
          {
            "position_x": 83.32909310588992,
            "position_y": 123.85451976554809,
            "velocity_x": 1.6020658584662328,
            "velocity_y": 3.581036747068265
          },
          {
            "position_x": 82.64891278127654,
            "position_y": 121.97373409833111,
            "velocity_x": 1.6563892670143787,
            "velocity_y": 3.563782510791282
          },
          {
            "position_x": 82.25062206490463,
            "position_y": 120.01379417444264,
            "velocity_x": 1.886281257453959,
            "velocity_y": 3.4768138406741853
          },
          {
            "position_x": 81.366138628593,
            "position_y": 118.2200023663193,
            "velocity_x": 2.073802323116536,
            "velocity_y": 3.322807717924138
          }
        ]
      }
    ],
    "expected to pass through flipped line"
  ],
  [
    2,
    152,
    0,
    0,
    [{ "position_x": 0, "position_y": 0, "velocity_x": 0.4, "velocity_y": 0, "angle": 0, "remount": true }],
    "line_flags",
    [
      {
        "points": [
          {
            "position_x": 84.77723572780025,
            "position_y": 174.29403215383155,
            "velocity_x": -3.30066877595668,
            "velocity_y": 2.483620310575776
          },
          {
            "position_x": 79.84588590146649,
            "position_y": 174.55771406380842,
            "velocity_x": -3.2576880503147123,
            "velocity_y": 3.3253844211375165
          },
          {
            "position_x": 80.55339765906989,
            "position_y": 189.44271675414004,
            "velocity_x": -1.8555906600407894,
            "velocity_y": 3.135749137034071
          },
          {
            "position_x": 85.56631388656743,
            "position_y": 191.71962156489326,
            "velocity_x": -1.3332235628669622,
            "velocity_y": 2.684390675716929
          },
          {
            "position_x": 85.15456407518346,
            "position_y": 179.33226043453402,
            "velocity_x": -1.9893070767886485,
            "velocity_y": 2.7896607166969885
          },
          {
            "position_x": 90.6753035100373,
            "position_y": 178.81761441086385,
            "velocity_x": -1.199968418742742,
            "velocity_y": 1.4611342505420055
          },
          {
            "position_x": 86.72042541405713,
            "position_y": 184.02159037555776,
            "velocity_x": -0.745554915739902,
            "velocity_y": 2.6527726529364086
          },
          {
            "position_x": 86.83579712771255,
            "position_y": 184.05864851510566,
            "velocity_x": -0.6859041660254519,
            "velocity_y": 2.6834863548326835
          },
          {
            "position_x": 84.45053595235237,
            "position_y": 186.3514275976174,
            "velocity_x": -1.9445990135413638,
            "velocity_y": 2.8167649987019727
          },
          {
            "position_x": 84.51471135496836,
            "position_y": 186.39181626368034,
            "velocity_x": -2.060460038183251,
            "velocity_y": 2.74860087482013
          },
          {
            "position_x": 92.35179259451266,
            "position_y": 179.90820340293877,
            "velocity_x": -1.1733158686153276,
            "velocity_y": 1.4407539964704257
          },
          {
            "position_x": 93.64929545568158,
            "position_y": 181.4302041668211,
            "velocity_x": -1.4421228263993726,
            "velocity_y": 1.96948745682721
          },
          {
            "position_x": 95.2884253783441,
            "position_y": 182.5761767217422,
            "velocity_x": -1.4322969097368174,
            "velocity_y": 2.680588492420884
          },
          {
            "position_x": 97.23797042375469,
            "position_y": 183.02257801644802,
            "velocity_x": -1.131939497921212,
            "velocity_y": 3.344814887398184
          },
          {
            "position_x": 99.21082141797191,
            "position_y": 182.694159145772,
            "velocity_x": -0.34175880785467144,
            "velocity_y": 3.8601619439116575
          },
          {
            "position_x": 101.0097468955992,
            "position_y": 181.82016422247818,
            "velocity_x": 0.23053582997814603,
            "velocity_y": 4.049782925191994
          },
          {
            "position_x": 102.15826436369831,
            "position_y": 180.1828164813214,
            "velocity_x": 0.7764302776779233,
            "velocity_y": 4.009455976905542
          }
        ]
      }
    ],
    "expected to collide with flipped line"
  ]
]
